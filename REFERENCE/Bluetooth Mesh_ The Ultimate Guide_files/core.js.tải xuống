(function(){let e,t=this,r=t.document;const n=r.currentScript.src;let i=n.substr(0,n.lastIndexOf("/")+1),o=r.body||r.head,a=o.querySelector("iframe#sleeknote");a?e=a.contentWindow:(o.insertAdjacentHTML("beforeend",'<iframe id=sleeknote style="display:none!important" aria-hidden="true"></iframe>'),e=o.lastElementChild.contentWindow,e.promises=[]);let s="";if(!i.includes("local.sleeknote.com")){let k=n.split("/").pop().split(".")[0];s=(k.split("-")[1]||"production")+"/"}let l=new e.URL(t.location),c=new e.URLSearchParams(l.search);if(c.has("snhide"))return;let u=n.split("#")[1]||"SleekNote",d="https://local.sleeknote.com",m=(c.has("snlocal")||e.local)&&!n.includes(d),p=c.get("snbranch");if(m||p){let b=r.createElement("script");return b.charset="utf-8",m?(c.delete("snlocal"),b.src=d,e.local=!0):(c.delete("snbranch"),b.src="https://core-branches.sleeknote.com/branch-"+p),t.history.replaceState(null,null,r.location.origin+r.location.pathname+"?"+c.toString()),b.src+="/frontend2/core.js#"+u,void r.head.appendChild(b)}function f(t){let r=t.campaignName;try{r=e.decodeURI(e.decodeURI(r))}catch(e){}return r}if(!t.sndefine){let y=Object.create(null),P=Object.create(null);function h(t){let n=e.Promise.resolve();return y[t]||(n=new e.Promise(((e,n)=>{if(P[t])P[t].resolve.push(e),P[t].reject.push(n);else{P[t]={resolve:[e],reject:[n]};let o=r.createElement("script");o.src=i+s+(~t.indexOf(".js")?t:t+".js"),o.name=t,o.async=!0,o.charset="utf-8",r.head.appendChild(o),o.onload=function(){P[t].resolve.forEach((e=>{e()}))},o.onerror=function(e){throw P[t].reject.forEach((e=>{e()})),new Error("Error loading: "+e.currentTarget.src)}}}))),n.then((()=>y[t]))}Object.defineProperty(t,"sndefine",{value:function(...n){var i="string"==typeof n[0]?n.shift():r.currentScript.name,o=Array.isArray(n[0])?n.shift():[],a=n[0];y[i]||(y[i]=e.Promise.resolve().then((()=>e.Promise.all(o.map(h)).then((e=>a.apply(t,e))))))}}),Object.defineProperty(t,"arequire",{value:function(t){return new e.Promise((r=>{!function(t,r){e.Promise.all(t.map(h)).then((e=>{r&&r.apply(this,e)}))}([t],(function(e){return r(e)}))}))}}),y.global=e.Promise.resolve().then((()=>{const t=["fetch","FormData","setInterval","setTimeout","clearInterval","clearTimeout"];return new e.Proxy({},{get(r,n){let i=e[n];return t.includes(n)&&(i=i.bind(e)),i}})})),y["core-sleeknote"]=e.Promise.resolve().then((()=>{t.dev||(t.dev=Object.create(null));let r=Object.fromEntries(c.entries());var n={isSubscribedFromQuery:"true"==r.SNSubscribed||"drip"==r.utm_source&&"email"==r.utm_medium,debug:r.sndebug||r.sleeknote_debug&&"1"||"",reset:r.snreset,editor:r.sneditor,preview:r.snpreview,timestamp:"?"+(Number("{{sleekNotetimestamp}}")||""),getBase:()=>i+s,local:i.includes("local."),custom(e,t){var r=n.CustomInitSettings[e];return r||t},hasCustomProp:e=>e in n.CustomInitSettings,expose:(e,r)=>(t.dev[r]=e,e),hooks:{},eventName:"eve"+ +new Date,needBadge:!1,getDomainLimits:function(){return n.DomainLimits},namespaces:new e.Set,CustomInitSettings:{},DomainLimits:{},SleekNotes:[],getCampaignName:f};return n.preview&&(n.mergeId=void 0===r.snmergeid?0:r.snmergeid),n}))}let g,v=t.arequire("package-core-boot"),{promises:w}=e,S=!1;w.push(new e.Promise((function(e){g=e}))),e.Promise.allSettled(w.slice(0,-1)).then((function(){v.then((async function(r){await async function({launcher:r,coreConfig:o,emit:a,API:l,CONST:d,storage:m,B:p,siteData:f},h){let g=c.get("sncampid"),v=1==c.get("snrules");function w(e){if("outofstock"==e.SleeknoteType)return e}function k(e){e=e.map((e=>{if(S=S||w(e),e.NS=u,!g||e.CampaignId==g)return v&&(e.rules&&e.rules.groups.forEach((function(e){e.conditions=[]})),delete e.targeting),e})).filter((e=>e)),o.SleekNotes.splice(0,0,...e)}o.namespaces.add(u),o.needBadge=!1;let b=Array.isArray(t[u])?t[u].pop():t[u];if(b){if("SleekNote"!=u)try{let e=b.DripAccountId,r=t._dcfg.account_uid;if(e&&r!=e)return console.error(`Drip Account ID's mismatch - _dcfg:${r}, init:${e}. Campaigns in ${n} ignored.`),void h()}catch(e){}for(let[e,t]of Object.entries(b))if("SleekNotes"==e)c.has("snpreview")||k(t);else if("HideSleeknoteBadge"==e){if("SleekNote"==u&&!c.has("snpreview")){let e=t;void 0===t&&(e=!0),!e&&b.CustomerId>=790&&(o.needBadge=!0)}}else"object"==typeof t&&t?(o[e]||(o[e]={}),Object.assign(o[e],t)):void 0!==t&&(o[e]=t)}await m.postCreate(),(o.local||o.reset)&&"n"!=o.reset&&await m.forceResetSession(o.reset);o.preview&&await e.Promise.all([import(i+s+"preview-utils.js"),import(i+s+"preview-toolbar.js")]).then((async function(e){let[{default:t},{default:r}]=e,n=await t.fetchHTMLConfig(o.preview);k(n),p.is.desktop&&r(n[0],o)}));t[u]&&!t[u].API&&(t[u].API=Promise.resolve(l),t[u].triggerOnClick=t[u].triggerOnclick=(...e)=>t[u].API.then((t=>t.call(t,"launch",...e))));f.initialize(),await r.add(o.SleekNotes);let y=await t.arequire("package-tracker");e.trackPageView||y.trackPageView(u)&&(e.trackPageView=!0);await a(d.CORE.EVENTS.LOAD,{NS:u,command:function(){try{return l.apply(null,arguments)}catch(e){console.warn("Error calling API",e)}}}),h()}(r,g),S&&t.arequire("oos-module").then((e=>{e(u,S)}))}))})),function(){try{return t.location!==t.parent.location}catch(e){}}()&&t.parent.postMessage(t.JSON.stringify({fingerprint:"SleekNote",command:"core-loaded"}),"*")}).call(this);